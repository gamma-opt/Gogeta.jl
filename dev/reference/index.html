<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · Gogeta.jl</title><meta name="title" content="Reference · Gogeta.jl"/><meta property="og:title" content="Reference · Gogeta.jl"/><meta property="twitter:title" content="Reference · Gogeta.jl"/><meta name="description" content="Documentation for Gogeta.jl."/><meta property="og:description" content="Documentation for Gogeta.jl."/><meta property="twitter:description" content="Documentation for Gogeta.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Gogeta.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../tree_ensembles/">Tree ensembles</a></li><li><a class="tocitem" href="../neural_networks/">Neural networks</a></li><li><a class="tocitem" href="../api/">Public API</a></li><li><a class="tocitem" href="../literature/">Literature</a></li><li class="is-active"><a class="tocitem" href>Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/gamma-opt/Gogeta.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/gamma-opt/Gogeta.jl/blob/main/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><ul><li><a href="#Gogeta.CNNStructure"><code>Gogeta.CNNStructure</code></a></li><li><a href="#Gogeta.TEModel"><code>Gogeta.TEModel</code></a></li><li><a href="#Gogeta.CNN_formulate!-Tuple{JuMP.Model, Flux.Chain, CNNStructure}"><code>Gogeta.CNN_formulate!</code></a></li><li><a href="#Gogeta.NN_compress-Tuple{Flux.Chain, Vararg{Any, 4}}"><code>Gogeta.NN_compress</code></a></li><li><a href="#Gogeta.NN_formulate!-Tuple{JuMP.Model, Flux.Chain, Any, Any}"><code>Gogeta.NN_formulate!</code></a></li><li><a href="#Gogeta.TE_formulate!-Tuple{JuMP.Model, TEModel, Any}"><code>Gogeta.TE_formulate!</code></a></li><li><a href="#Gogeta.add_split_constraints!-Tuple{JuMP.Model, TEModel}"><code>Gogeta.add_split_constraints!</code></a></li><li><a href="#Gogeta.build_model!-NTuple{4, Any}"><code>Gogeta.build_model!</code></a></li><li><a href="#Gogeta.calculate_bounds-Tuple{JuMP.Model, Vararg{Any, 5}}"><code>Gogeta.calculate_bounds</code></a></li><li><a href="#Gogeta.children-Tuple{Int64, Dict, Int64}"><code>Gogeta.children</code></a></li><li><a href="#Gogeta.copy_model-Tuple{Any}"><code>Gogeta.copy_model</code></a></li><li><a href="#Gogeta.extract_evotrees_info-Tuple{Any}"><code>Gogeta.extract_evotrees_info</code></a></li><li><a href="#Gogeta.forward_pass!-Tuple{JuMP.Model, Any}"><code>Gogeta.forward_pass!</code></a></li><li><a href="#Gogeta.get_solution-Tuple{JuMP.Model, TEModel}"><code>Gogeta.get_solution</code></a></li><li><a href="#Gogeta.get_structure-Tuple{Flux.Chain, Array{Float32, 4}}"><code>Gogeta.get_structure</code></a></li><li><a href="#Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}, CNNStructure, Int64}"><code>Gogeta.image_pass!</code></a></li><li><a href="#Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}}"><code>Gogeta.image_pass!</code></a></li><li><a href="#Gogeta.init_TEModel!-Tuple{TEModel}"><code>Gogeta.init_TEModel!</code></a></li><li><a href="#Gogeta.local_search-NTuple{4, Any}"><code>Gogeta.local_search</code></a></li><li><a href="#Gogeta.local_search_CNN-Tuple{Any, Any}"><code>Gogeta.local_search_CNN</code></a></li><li><a href="#Gogeta.optimize_by_sampling!-Tuple{JuMP.Model, Any}"><code>Gogeta.optimize_by_sampling!</code></a></li><li><a href="#Gogeta.optimize_by_walking!-Tuple{JuMP.Model, Flux.Chain, Any, Any}"><code>Gogeta.optimize_by_walking!</code></a></li><li><a href="#Gogeta.optimize_by_walking_CNN!-Tuple{JuMP.Model, Any}"><code>Gogeta.optimize_by_walking_CNN!</code></a></li><li><a href="#Gogeta.prune!-NTuple{8, Any}"><code>Gogeta.prune!</code></a></li><li><a href="#Gogeta.tree_callback_algorithm-Tuple{Any, TEModel, JuMP.Model}"><code>Gogeta.tree_callback_algorithm</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.CNNStructure" href="#Gogeta.CNNStructure"><code>Gogeta.CNNStructure</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct CNNStructure</code></pre><p>Container for the layer structure of a convolutional neural network.</p><p>This structure is used for passing the CNN parameters from one function to another. This structure can be created with the <code>get_structure</code> -function.</p><p><strong>Fields</strong></p><ul><li><code>channels</code>: dictionary of (layer, number of channels) pairs for convolutional or pooling layers</li><li><code>dims</code>: dictionary of (layer, (# of rows, # of columns)) pairs for convolutional or pooling layers</li><li><code>dense_lengths</code>: dictionary of (layer, # of neurons) pairs for dense and flatten layers</li><li><code>conv_inds</code>: vector of the convolutional layer indices</li><li><code>maxpool_inds_inds</code>: vector of the maxpool layer indices</li><li><code>meanpool_inds</code>: vector of the meanpool layer indices</li><li><code>flatten_ind</code>: index of the <code>Flux.flatten</code> layer</li><li><code>dense_inds</code>: vector of the dense layer indices</li></ul><p>```</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/CNN_util.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.TEModel" href="#Gogeta.TEModel"><code>Gogeta.TEModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct TEModel</code></pre><p>Universal datatype for storing information about a Tree Ensemble Model. This is the datatype that is used when creating the integer optimization problem from a tree ensemble.</p><p>Different tree models (EvoTrees, XGBoost, RandomForest) require individual conversion functions to this datatype.</p><p><strong>Fields</strong></p><ul><li><code>n_trees</code>: number of trees in the ensemble</li><li><code>n_feats</code>: number of features (input variables) in the model</li><li><code>n_leaves</code>: number of leaves on each tree</li><li><code>leaves</code>: indices of the leaves on each tree</li><li><code>splits</code>: [feature, splitpoint index] pairs accessible by [tree, node]</li><li><code>splits_ordered</code>: splitpoints ordered by split value for each feature</li><li><code>n_splits</code>: number of splitpoints for each feature</li><li><code>predictions</code>: prediction of each node (zero for nodes that are not leaves)</li><li><code>split_nodes</code>: boolean array containing information whether a node is a split node or not</li></ul><p>Splitpoints is the set of unique condition values from the ensemble. Each node is associated with a condition value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/types.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.CNN_formulate!-Tuple{JuMP.Model, Flux.Chain, CNNStructure}" href="#Gogeta.CNN_formulate!-Tuple{JuMP.Model, Flux.Chain, CNNStructure}"><code>Gogeta.CNN_formulate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function create_MIP_from_CNN!(jump_model::JuMP.Model, CNN_model::Flux.Chain, cnnstruct::CNNStructure)</code></pre><p>Creates a mixed-integer optimization problem from a <code>Flux.Chain</code> convolutional neural network model. The optimization formulation is saved in the <code>JuMP.Model</code> given as an input.</p><p>A dummy objective function of 1 is added to the model. The objective is left for the user to define.</p><p>The convolutional neural network must follow a certain structure:</p><ul><li>It must consist of (in order) convolutional and pooling layers, a <code>Flux.flatten</code> layer and finally dense layers</li><li>I.e. allowed layer types: <code>Conv</code>, <code>MaxPool</code>, <code>MeanPool</code>, <code>Flux.flatten</code>, <code>Dense</code></li><li>The activation function for all of the convolutional layers and the dense layers must be <code>ReLU</code></li><li>The last dense layer must use the <code>identity</code> activation function</li><li>Input size, filter size, stride and padding can be chosen freely</li></ul><p><strong>Parameters</strong></p><ul><li><code>jump_model</code>: an empty optimization model where the formulation will be saved</li><li><code>CNN_model</code>: <code>Flux.Chain</code> containing the CNN</li><li><code>cnnstruct</code>: holds the layer structure of the CNN</li></ul><p><strong>Optional Parameters</strong></p><ul><li><code>max_to_mean</code>: formulate maxpool layers as meanpool layers. This might improve the convex hull of the model (linear relaxation) for use with relaxing walk algorithm.</li><li><code>logging</code>: print progress info to console.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/CNN_to_MIP.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.NN_compress-Tuple{Flux.Chain, Vararg{Any, 4}}" href="#Gogeta.NN_compress-Tuple{Flux.Chain, Vararg{Any, 4}}"><code>Gogeta.NN_compress</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function NN_compress(NN_model::Flux.Chain, U_in, L_in, U_bounds, L_bounds)</code></pre><p>Compresses a neural network using precomputed bounds.</p><p><strong>Arguments</strong></p><ul><li><code>NN_model</code>: Neural network to be compressed.</li><li><code>U_in</code>: Upper bounds for the input variables.</li><li><code>L_in</code>: Lower bounds for the input variables.</li><li><code>U_bounds</code>: Upper bounds for the other neurons.</li><li><code>L_bounds</code>: Lower bounds for the other neurons.</li></ul><p>Returns a <code>Flux.Chain</code> model of the compressed neural network.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/compression.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.NN_formulate!-Tuple{JuMP.Model, Flux.Chain, Any, Any}" href="#Gogeta.NN_formulate!-Tuple{JuMP.Model, Flux.Chain, Any, Any}"><code>Gogeta.NN_formulate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function NN_formulate!(jump_model::JuMP.Model, NN_model::Flux.Chain, U_in, L_in; U_bounds=nothing, L_bounds=nothing, U_out=nothing, L_out=nothing, bound_tightening=&quot;fast&quot;, compress=false, parallel=false, silent=true)</code></pre><p>Creates a mixed-integer optimization problem from a <code>Flux.Chain</code> model.</p><p>The parameters are used to specify what kind of bound tightening and compression will be used.</p><p>A dummy objective function of 1 is added to the model. The objective is left for the user to define.</p><p><strong>Arguments</strong></p><ul><li><code>jump_model</code>: The constraints and variables will be saved to this optimization model.</li><li><code>NN_model</code>: Neural network model to be formulated.</li><li><code>U_in</code>: Upper bounds for the input variables.</li><li><code>L_in</code>: Lower bounds for the input variables.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>bound_tightening</code>: Mode selection: &quot;fast&quot;, &quot;standard&quot;, &quot;output&quot; or &quot;precomputed&quot;</li><li><code>compress</code>: Should the model be simultaneously compressed?</li><li><code>parallel</code>: Runs bound tightening in parallel. <code>set_solver!</code>-function must be defined in the global scope, see documentation or examples.</li><li><code>U_bounds</code>: Upper bounds. Needed if bound_tightening=&quot;precomputed&quot;</li><li><code>L_bounds</code>: Lower bounds. Needed if bound_tightening=&quot;precomputed&quot;</li><li><code>U_out</code>: Upper bounds for the output variables. Needed if bound_tightening=&quot;output&quot;.</li><li><code>L_out</code>: Lower bounds for the output variables. Needed if bound_tightening=&quot;output&quot;.</li><li><code>silent</code>: Controls console ouput.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/NN_to_MIP.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.TE_formulate!-Tuple{JuMP.Model, TEModel, Any}" href="#Gogeta.TE_formulate!-Tuple{JuMP.Model, TEModel, Any}"><code>Gogeta.TE_formulate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function TE_formulate!(opt_model::JuMP.Model, TE::TEModel, objective)</code></pre><p>Formulates a tree ensemble to the JuMP model <code>opt_model</code> based on the given tree ensemble <code>TE</code>.</p><p>The JuMP model is formulated without the split constraints.</p><p>An objective function either minimizing or maximizing the ensemble output is added to the <code>JuMP</code> model.</p><p><strong>Arguments</strong></p><ul><li><code>opt_model</code>: A <code>JuMP</code> model where the formulation will be saved to.</li><li><code>TE</code>: A tree ensemble model in the universal data type <code>TEModel</code>. </li><li><code>objective</code>: MIN<em>SENSE or MAX</em>SENSE. Minimize or maximize the tree ensemble output.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/TE_to_MIP.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.add_split_constraints!-Tuple{JuMP.Model, TEModel}" href="#Gogeta.add_split_constraints!-Tuple{JuMP.Model, TEModel}"><code>Gogeta.add_split_constraints!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function add_split_constraints!(opt_model::JuMP.Model, TE::TEModel)</code></pre><p>Adds all split constraints to the formulation.</p><p><strong>Arguments</strong></p><ul><li><code>opt_model</code>: A JuMP model containing the formulation.</li><li><code>TE</code>: A tree ensemble model in the universal data type <code>TEModel</code>. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/TE_to_MIP.jl#L33-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.build_model!-NTuple{4, Any}" href="#Gogeta.build_model!-NTuple{4, Any}"><code>Gogeta.build_model!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function build_model!(W, b, K, neurons)</code></pre><p>Builds a new <code>Flux.Chain</code> model from the given weights and biases. Modifies the <code>W</code> and <code>b</code> arrays.</p><p>Returns the new <code>Flux.Chain</code> model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/compression.jl#L129-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.calculate_bounds-Tuple{JuMP.Model, Vararg{Any, 5}}" href="#Gogeta.calculate_bounds-Tuple{JuMP.Model, Vararg{Any, 5}}"><code>Gogeta.calculate_bounds</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function calculate_bounds(model::JuMP.Model, layer, neuron, W, b, neurons; layers_removed=0)</code></pre><p>Calculates the upper and lower activation bounds for a neuron in a ReLU-activated neural network.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/bounds.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.children-Tuple{Int64, Dict, Int64}" href="#Gogeta.children-Tuple{Int64, Dict, Int64}"><code>Gogeta.children</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function children(id::Int, leaf_dict::Dict, max::Int)</code></pre><p>Finds the leaf indices of the children leaves of node <code>id</code> in a binary tree.</p><p>Returns an array of the leaf indices.</p><p><strong>Arguments</strong></p><ul><li><code>id</code>: Index of the node in a binary tree. Indexing starts from one and follows level order.</li><li><code>leaf_dict</code>: A dictionary (map) of the leaf indices accessible by the node indices.</li><li><code>max</code>: Biggest possible node id in the tree. Used to terminate the search.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/util.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.copy_model-Tuple{Any}" href="#Gogeta.copy_model-Tuple{Any}"><code>Gogeta.copy_model</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function copy_model(input_model, solver_params)</code></pre><p>Creates a copy of a JuMP model. Solver has to be specified for each new copy. Used for parallelization.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/bounds.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.extract_evotrees_info-Tuple{Any}" href="#Gogeta.extract_evotrees_info-Tuple{Any}"><code>Gogeta.extract_evotrees_info</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">extract_evotrees_info(evo_model; tree_limit=length(evo_model.trees))</code></pre><p>Gets the data required for constructing the corresponding MIP from an <a href="https://github.com/Evovest/EvoTrees.jl">EvoTrees</a> model <code>evo_model</code>.  Returns a custom datatype <code>TEModel</code> which contains the necessary information.</p><p><strong>Arguments</strong></p><ul><li><code>evo_model</code>: A trained EvoTrees tree ensemble model.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>tree_limit</code>: only first <em>n</em> trees specified by the argument will be used</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/types.jl#L35-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.forward_pass!-Tuple{JuMP.Model, Any}" href="#Gogeta.forward_pass!-Tuple{JuMP.Model, Any}"><code>Gogeta.forward_pass!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function forward_pass!(jump_model::JuMP.Model, input)</code></pre><p>Calculates the output of a JuMP model representing a neural network.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/NN_to_MIP.jl#L204-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.get_solution-Tuple{JuMP.Model, TEModel}" href="#Gogeta.get_solution-Tuple{JuMP.Model, TEModel}"><code>Gogeta.get_solution</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function get_solution(model::JuMP.Model, TE::TEModel)</code></pre><p>Finds the upper and lower bounds for each input variable given the optimized model.</p><p>Returns the bounds for each feature in an array.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: The optimized JuMP model.</li><li><code>TE</code>: Struct of type <code>TEModel</code> containing information about the tree ensemble.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/util.jl#L35-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.get_structure-Tuple{Flux.Chain, Array{Float32, 4}}" href="#Gogeta.get_structure-Tuple{Flux.Chain, Array{Float32, 4}}"><code>Gogeta.get_structure</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function get_structure(CNN_model::Flux.Chain, input::Array{Float32, 4})</code></pre><p>Extract the layer structure of a convolutional neural network. The input image is needed to calculate the correct sizes for the hidden 2-dimensional layers.</p><p>Returns a <code>CNNStructure</code> struct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/CNN_util.jl#L32-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}, CNNStructure, Int64}" href="#Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}, CNNStructure, Int64}"><code>Gogeta.image_pass!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function image_pass!(jump_model::JuMP.Model, input::Array{Float32, 4}, cnnstruct::CNNStructure, layer::Int)</code></pre><p><strong>Debugging version</strong></p><p>Forward pass an image through the JuMP model representing a convolutional neural network.</p><p>Returns the output of the layer with index given as input.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/CNN_util.jl#L88-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}}" href="#Gogeta.image_pass!-Tuple{JuMP.Model, Array{Float32, 4}}"><code>Gogeta.image_pass!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function image_pass!(jump_model::JuMP.Model, input::Array{Float32, 4})</code></pre><p>Forward pass an image through the JuMP model representing a convolutional neural network.</p><p>Returns the output of the network, i.e., a vector of the activations of the last dense layer neurons.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/CNN_util.jl#L108-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.init_TEModel!-Tuple{TEModel}" href="#Gogeta.init_TEModel!-Tuple{TEModel}"><code>Gogeta.init_TEModel!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function init_TEModel!(TE::TEModel)</code></pre><p>Precompute child leaves which are needed for generating the split constraints. Changes <code>child_leaves</code> field of the <code>TEModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/types.jl#L101-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.local_search-NTuple{4, Any}" href="#Gogeta.local_search-NTuple{4, Any}"><code>Gogeta.local_search</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function local_search(start, jump_model, nn_model, U_in, L_in; max_iter=100, epsilon=0.01, show_path=false, logging=false, tolerance=0.001)</code></pre><p>Performs relaxing walk local search on the given neural network JuMP formulation. See Tong et al. (2024) for more details.</p><p><strong>Parameters</strong></p><ul><li><code>start</code>: starting point for the search (coordinate in the space)</li><li><code>jump_model</code>: <code>JuMP</code> model containing the NN formulation</li></ul><p><strong>Optional Parameters</strong></p><ul><li><code>epsilon</code>: controls the step size taken out of the linear region</li><li><code>show_path</code>: return the path taken by the local search in addition to the optimum</li><li><code>logging</code>: print progress info to console</li><li><code>tolerance</code>: minimum relative improvement required at every step to continue the search</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/relaxing_walk.jl#L155-L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.local_search_CNN-Tuple{Any, Any}" href="#Gogeta.local_search_CNN-Tuple{Any, Any}"><code>Gogeta.local_search_CNN</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function local_search_CNN(start, cnn_jump; epsilon=0.01, max_iter=10, show_path=false, logging=false, tolerance=0.01)</code></pre><p>Performs relaxing walk local search on the given convolutional neural network JuMP formulation. See Tong et al. (2024) for more details.</p><p><strong>Parameters</strong></p><ul><li><code>start</code>: starting point for the search (coordinate in the image space)</li><li><code>cnn_jump</code>: <code>JuMP</code> model containing the CNN formulation</li></ul><p><strong>Optional Parameters</strong></p><ul><li><code>epsilon</code>: controls the step size taken out of the linear region</li><li><code>max_iter</code>: maximum number of search steps</li><li><code>show_path</code>: return the path taken by the local search in addition to the optimum</li><li><code>logging</code>: print progress info to console</li><li><code>tolerance</code>: minimum relative improvement required at every step to continue the search</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/relaxing_walk_CNN.jl#L121-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.optimize_by_sampling!-Tuple{JuMP.Model, Any}" href="#Gogeta.optimize_by_sampling!-Tuple{JuMP.Model, Any}"><code>Gogeta.optimize_by_sampling!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function optimize_by_sampling!(jump_model, sample_points; enhanced=true, exploitation_rate=0.67)</code></pre><p>Optimizes a neural network by iteratively solving the &quot;local&quot; optimization problem at the sample points. The best (optimum, extremum) solution is returned.</p><p><strong>Arguments</strong></p><ul><li><code>jump_model</code>: <code>JuMP</code> model containing the formulation (and desired objective function)</li><li><code>sample_points</code>: A matrix where the columns are the sample inputs.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>enhanced</code>: Controls whether local optimum or only local hyperplane corner is searched for.</li><li><code>exploitation_rate</code>: Controls how often the algorithm performs local search versus samples a new point.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/sampling.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.optimize_by_walking!-Tuple{JuMP.Model, Flux.Chain, Any, Any}" href="#Gogeta.optimize_by_walking!-Tuple{JuMP.Model, Flux.Chain, Any, Any}"><code>Gogeta.optimize_by_walking!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function optimize_by_walking!(original::JuMP.Model, nn_model::Flux.Chain, U_in, L_in; delta=0.1, return_sampled=false, logging=true, iterations=10, infeasible_per_iter=5)</code></pre><p>Performs the full relaxing walk algorithm on the given neural network JuMP formulation. See Tong et al. (2024) for more details.</p><p><strong>Parameters</strong></p><ul><li><code>original</code>: <code>JuMP</code> model containing the NN formulation.</li><li><code>nn_model</code>: the original NN as <code>Flux.Chain</code></li></ul><p><strong>Optional Parameters</strong></p><ul><li><code>delta</code>: controls how strongly certain neurons are preferred when fixing the binary variables</li><li><code>return_sampled</code>: return sampled points in addition to the optima </li><li><code>logging</code>: print progress info to the console</li><li><code>iterations</code>: the number of fresh starts from the linear relaxation (no binary variables fixed)</li><li><code>infeasible_per_iter</code>: the number of infeasible LP relaxations allowed before starting next iteration</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/relaxing_walk.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.optimize_by_walking_CNN!-Tuple{JuMP.Model, Any}" href="#Gogeta.optimize_by_walking_CNN!-Tuple{JuMP.Model, Any}"><code>Gogeta.optimize_by_walking_CNN!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function optimize_by_walking_CNN!(cnn_jump::JuMP.Model, input; iterations=10, samples_per_iter=5, timelimit=1.0, tolerance=1.0)</code></pre><p>Performs the full relaxing walk algorithm on the given convolutional neural network JuMP formulation. See Tong et al. (2024) for more details.</p><p><strong>Parameters</strong></p><ul><li><code>cnn_jump</code>: <code>JuMP</code> model containing the CNN formulation.</li><li><code>input</code>: An example input to the CNN. Used to extract the input dimensions.</li></ul><p><strong>Optional Parameters</strong></p><ul><li><code>iterations</code>: the number of fresh starts from the linear relaxation (no binary variables fixed)</li><li><code>samples_per_iter</code>: maximum number of successful samples per iteration</li><li><code>timelimit</code>: time limit for the LP relaxation solves</li><li><code>tolerance</code>: how different new samples must be from any previous one</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/relaxing_walk_CNN.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.prune!-NTuple{8, Any}" href="#Gogeta.prune!-NTuple{8, Any}"><code>Gogeta.prune!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function prune!(W, b, removed_neurons, layers_removed, neuron_count, layer, bounds_U, bounds_L)</code></pre><p>Removes stabily active or inactive neurons in a network by updating the weights and the biases and the removed neurons list accordingly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/neural_networks/compression.jl#L48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gogeta.tree_callback_algorithm-Tuple{Any, TEModel, JuMP.Model}" href="#Gogeta.tree_callback_algorithm-Tuple{Any, TEModel, JuMP.Model}"><code>Gogeta.tree_callback_algorithm</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function tree_callback_algorithm(cb_data, TE::TEModel, opt_model::JuMP.Model)</code></pre><p>The callback algorithm for tree ensemble optimization using lazy constraints.</p><p>Using lazy constraints, the split constraints are added one-by-one for each tree.</p><p>See examples or documentation for information on how to use lazy constraints.</p><p><strong>Arguments</strong></p><ul><li><code>cb_data</code>: Callback data</li><li><code>TE</code>: A tree ensemble model in the universal data type <code>TEModel</code>. </li><li><code>opt_model</code>: A JuMP model containing the formulation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gamma-opt/Gogeta.jl/blob/1d8a0896cb11900b2dc062133ba24a4ef9d8d856/src/tree_ensembles/TE_to_MIP.jl#L60-L74">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../literature/">« Literature</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Tuesday 18 June 2024 15:09">Tuesday 18 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
